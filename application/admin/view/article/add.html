{extend name="public/base"/}
{block name="bread"}
<li class="breadcrumb-item active" aria-current="page"> <a href="{:url('admin/article/index')}">文章管理</a> </li>
{/block}
{block name="content"}
<div class="row" style="margin-bottom: 100px;">
    <div class="col ">
        <form>
            <input type="hidden" name="admin_id" value="{$Think.session.result.id}">
            <div class="form-group">
                <label for="exampleInputEmail1">文章标题</label>
                <input type="text" class="form-control" name="title" aria-describedby="emailHelp" placeholder="请输入文章标题">
            </div>
            <div class="form-group">
                <label for="exampleInputEmail1">文章所属导航</label>
                <select class="custom-select" id="inputGroupSelect01" name="menu_id">
                    <option selected>--请选择--</option>
                    {volist name="$listMenu" id="vo"}
                    <option value="{$vo.id}">{$vo.name}</option>
                    {/volist}
                </select>
            </div>
            <div class="form-group">
                <label for="exampleInputEmail1">关键字</label>
                <input type="text" class="form-control" name="keyWord" aria-describedby="emailHelp"
                    placeholder="请输入关键字">
            </div>
            <div class="form-group">
                <label for="exampleInputEmail1">文章标签</label>
                <input type="text" class="form-control" name="sort" aria-describedby="emailHelp" placeholder="请输入关键字">
                <small id="emailHelp" class="form-text text-muted">文章分了将以|的方式分割</small>
            </div>
            <div class="form-group">
                <label for="exampleInputEmail1">文章内容</label>
                <textarea name="content" id="content"></textarea>

            </div>
            <div class="form-group">
                <label for="exampleInputPassword1">是否推荐</label>&nbsp;
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="is_top" id="inlineRadio1" value="0">
                    <label class="form-check-label" for="inlineRadio1">否</label>
                </div>
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" name="is_top" id="inlineRadio2" value="1">
                    <label class="form-check-label" for="inlineRadio2">是</label>
                </div>
            </div>
            <button type="button" class="btn btn-primary" id="add">添加</button>
        </form>
    </div>
</div>
<!-- <script>tinymce.init({ selector: 'textarea' });</script> -->
<script>
    $(function () {
        UE.getEditor('content');
    });
    // 添加文章
    $(function () {
        $('#add').click(function () {
            $.ajax({
                url: "{:url('admin/article/addArticle')}",
                type: 'post',
                data: $('form').serialize(),
                dataType: 'json',
                success: function (data) {
                    if (data.code == 200) {
                        layer.alert(data.msg, {
                            icon: 1,
                            time: 2000,
                            end: function () {
                                window.location.href = "{:url('admin/article/index')}"
                            }
                        })
                    } else {
                        layer.alert(data.msg, {
                            icon: 0
                        });

                    }

                }

            });

        })
    })
</script>
{/block}